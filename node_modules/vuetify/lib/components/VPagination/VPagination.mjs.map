{"version":3,"file":"VPagination.mjs","names":["VBtn","IconValue","makeBorderProps","makeDensityProps","makeElevationProps","makeRoundedProps","makeSizeProps","makeTagProps","makeThemeProps","provideTheme","makeVariantProps","provideDefaults","useLocale","useProxiedModel","useRefs","useResizeObserver","useRtl","computed","nextTick","ref","toRef","createRange","defineComponent","keyValues","useRender","VPagination","name","props","activeColor","String","start","type","Number","default","modelValue","disabled","Boolean","length","validator","val","totalVisible","firstIcon","prevIcon","nextIcon","lastIcon","ariaLabel","pageAriaLabel","currentPageAriaLabel","firstAriaLabel","previousAriaLabel","nextAriaLabel","lastAriaLabel","ellipsis","showFirstLastPage","tag","variant","emits","value","first","prev","next","last","setup","slots","emit","page","t","n","isRtl","themeClasses","maxButtons","undefined","scoped","resizeRef","entries","target","contentRect","firstItem","querySelector","totalWidth","width","itemWidth","offsetWidth","parseFloat","getComputedStyle","marginRight","minButtons","Math","max","floor","toFixed","parseInt","range","isNaN","MAX_SAFE_INTEGER","even","middle","left","right","rangeLength","rangeStart","ceil","setValue","e","event","preventDefault","refs","updateRef","VPaginationBtn","color","border","density","size","items","map","item","index","isActive","key","icon","elevation","rounded","ariaCurrent","onClick","controls","prevDisabled","nextDisabled","ariaDisabled","updateFocus","currentIndex","$el","focus","onKeydown"],"sources":["../../../src/components/VPagination/VPagination.tsx"],"sourcesContent":["// Styles\nimport './VPagination.sass'\n\n// Components\nimport { VBtn } from '../VBtn'\n\n// Composables\nimport { IconValue } from '@/composables/icons'\nimport { makeBorderProps } from '@/composables/border'\nimport { makeDensityProps } from '@/composables/density'\nimport { makeElevationProps } from '@/composables/elevation'\nimport { makeRoundedProps } from '@/composables/rounded'\nimport { makeSizeProps } from '@/composables/size'\nimport { makeTagProps } from '@/composables/tag'\nimport { makeThemeProps, provideTheme } from '@/composables/theme'\nimport { makeVariantProps } from '@/composables/variant'\nimport { provideDefaults } from '@/composables/defaults'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { useRefs } from '@/composables/refs'\nimport { useResizeObserver } from '@/composables/resizeObserver'\nimport { useRtl } from '@/composables/rtl'\n\n// Utilities\nimport { computed, nextTick, ref, toRef } from 'vue'\nimport { createRange, defineComponent, keyValues, useRender } from '@/util'\n\n// Types\nimport type { ComponentPublicInstance } from 'vue'\n\nexport const VPagination = defineComponent({\n  name: 'VPagination',\n\n  props: {\n    activeColor: String,\n    start: {\n      type: [Number, String],\n      default: 1,\n    },\n    modelValue: {\n      type: Number,\n      default: (props: any) => props.start,\n    },\n    disabled: Boolean,\n    length: {\n      type: [Number, String],\n      default: 1,\n      validator: (val: number) => val % 1 === 0,\n    },\n    totalVisible: [Number, String],\n    firstIcon: {\n      type: IconValue,\n      default: '$first',\n    },\n    prevIcon: {\n      type: IconValue,\n      default: '$prev',\n    },\n    nextIcon: {\n      type: IconValue,\n      default: '$next',\n    },\n    lastIcon: {\n      type: IconValue,\n      default: '$last',\n    },\n    ariaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.root',\n    },\n    pageAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.page',\n    },\n    currentPageAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.currentPage',\n    },\n    firstAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.first',\n    },\n    previousAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.previous',\n    },\n    nextAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.next',\n    },\n    lastAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.last',\n    },\n    ellipsis: {\n      type: String,\n      default: '...',\n    },\n    showFirstLastPage: Boolean,\n\n    ...makeBorderProps(),\n    ...makeDensityProps(),\n    ...makeElevationProps(),\n    ...makeRoundedProps(),\n    ...makeSizeProps(),\n    ...makeTagProps({ tag: 'nav' }),\n    ...makeThemeProps(),\n    ...makeVariantProps({ variant: 'text' } as const),\n  },\n\n  emits: {\n    'update:modelValue': (value: number) => true,\n    first: (value: number) => true,\n    prev: (value: number) => true,\n    next: (value: number) => true,\n    last: (value: number) => true,\n  },\n\n  setup (props, { slots, emit }) {\n    const page = useProxiedModel(props, 'modelValue')\n    const { t, n } = useLocale()\n    const { isRtl } = useRtl()\n    const { themeClasses } = provideTheme(props)\n    const maxButtons = ref(-1)\n\n    provideDefaults(undefined, { scoped: true })\n\n    const { resizeRef } = useResizeObserver((entries: ResizeObserverEntry[]) => {\n      if (!entries.length) return\n\n      const { target, contentRect } = entries[0]\n\n      const firstItem = target.querySelector('.v-pagination__list > *') as HTMLElement\n\n      if (!firstItem) return\n\n      const totalWidth = contentRect.width\n      const itemWidth =\n        firstItem.offsetWidth +\n        parseFloat(getComputedStyle(firstItem).marginRight) * 2\n      const minButtons = props.showFirstLastPage ? 5 : 3\n\n      maxButtons.value = Math.max(0, Math.floor(\n        // Round to two decimal places to avoid floating point errors\n        +((totalWidth - itemWidth * minButtons) / itemWidth).toFixed(2)\n      ))\n    })\n\n    const length = computed(() => parseInt(props.length, 10))\n    const start = computed(() => parseInt(props.start, 10))\n\n    const totalVisible = computed(() => {\n      if (props.totalVisible) return parseInt(props.totalVisible, 10)\n      else if (maxButtons.value >= 0) return maxButtons.value\n      return length.value\n    })\n\n    const range = computed(() => {\n      if (length.value <= 0 || isNaN(length.value) || length.value > Number.MAX_SAFE_INTEGER) return []\n\n      if (totalVisible.value <= 1) return [page.value]\n\n      if (length.value <= totalVisible.value) {\n        return createRange(length.value, start.value)\n      }\n\n      const even = totalVisible.value % 2 === 0\n      const middle = even ? totalVisible.value / 2 : Math.floor(totalVisible.value / 2)\n      const left = even ? middle : middle + 1\n      const right = length.value - middle\n\n      if (left - page.value >= 0) {\n        return [...createRange(Math.max(1, totalVisible.value - 1), start.value), props.ellipsis, length.value]\n      } else if (page.value - right >= (even ? 1 : 0)) {\n        const rangeLength = totalVisible.value - 1\n        const rangeStart = length.value - rangeLength + start.value\n        return [start.value, props.ellipsis, ...createRange(rangeLength, rangeStart)]\n      } else {\n        const rangeLength = Math.max(1, totalVisible.value - 3)\n        const rangeStart = rangeLength === 1 ? page.value : page.value - Math.ceil(rangeLength / 2) + start.value\n        return [start.value, props.ellipsis, ...createRange(rangeLength, rangeStart), props.ellipsis, length.value]\n      }\n    })\n\n    // TODO: 'first' | 'prev' | 'next' | 'last' does not work here?\n    function setValue (e: Event, value: number, event?: any) {\n      e.preventDefault()\n      page.value = value\n      event && emit(event, value)\n    }\n\n    const { refs, updateRef } = useRefs<ComponentPublicInstance>()\n\n    provideDefaults({\n      VPaginationBtn: {\n        color: toRef(props, 'color'),\n        border: toRef(props, 'border'),\n        density: toRef(props, 'density'),\n        size: toRef(props, 'size'),\n        variant: toRef(props, 'variant'),\n      },\n    })\n\n    const items = computed(() => {\n      return range.value.map((item, index) => {\n        const ref = (e: any) => updateRef(e, index)\n\n        if (typeof item === 'string') {\n          return {\n            isActive: false,\n            key: `ellipsis-${index}`,\n            page: item,\n            props: {\n              ref,\n              ellipsis: true,\n              icon: true,\n              disabled: true,\n            },\n          }\n        } else {\n          const isActive = item === page.value\n          return {\n            isActive,\n            key: item,\n            page: n(item),\n            props: {\n              ref,\n              ellipsis: false,\n              icon: true,\n              disabled: !!props.disabled || props.length < 2,\n              elevation: props.elevation,\n              rounded: props.rounded,\n              color: isActive ? props.activeColor : props.color,\n              ariaCurrent: isActive,\n              ariaLabel: t(isActive ? props.currentPageAriaLabel : props.pageAriaLabel, index + 1),\n              onClick: (e: Event) => setValue(e, item),\n            },\n          }\n        }\n      })\n    })\n\n    const controls = computed(() => {\n      const prevDisabled = !!props.disabled || page.value <= start.value\n      const nextDisabled = !!props.disabled || page.value >= start.value + length.value - 1\n\n      return {\n        first: props.showFirstLastPage ? {\n          icon: isRtl.value ? props.lastIcon : props.firstIcon,\n          onClick: (e: Event) => setValue(e, start.value, 'first'),\n          disabled: prevDisabled,\n          ariaLabel: t(props.firstAriaLabel),\n          ariaDisabled: prevDisabled,\n        } : undefined,\n        prev: {\n          icon: isRtl.value ? props.nextIcon : props.prevIcon,\n          onClick: (e: Event) => setValue(e, page.value - 1, 'prev'),\n          disabled: prevDisabled,\n          ariaLabel: t(props.previousAriaLabel),\n          ariaDisabled: prevDisabled,\n        },\n        next: {\n          icon: isRtl.value ? props.prevIcon : props.nextIcon,\n          onClick: (e: Event) => setValue(e, page.value + 1, 'next'),\n          disabled: nextDisabled,\n          ariaLabel: t(props.nextAriaLabel),\n          ariaDisabled: nextDisabled,\n        },\n        last: props.showFirstLastPage ? {\n          icon: isRtl.value ? props.firstIcon : props.lastIcon,\n          onClick: (e: Event) => setValue(e, start.value + length.value - 1, 'last'),\n          disabled: nextDisabled,\n          ariaLabel: t(props.lastAriaLabel),\n          ariaDisabled: nextDisabled,\n        } : undefined,\n      }\n    })\n\n    function updateFocus () {\n      const currentIndex = page.value - start.value\n      refs.value[currentIndex]?.$el.focus()\n    }\n\n    function onKeydown (e: KeyboardEvent) {\n      if (e.key === keyValues.left && !props.disabled && page.value > props.start) {\n        page.value = page.value - 1\n        nextTick(updateFocus)\n      } else if (e.key === keyValues.right && !props.disabled && page.value < start.value + length.value - 1) {\n        page.value = page.value + 1\n        nextTick(updateFocus)\n      }\n    }\n\n    useRender(() => (\n      <props.tag\n        ref={ resizeRef }\n        class={[\n          'v-pagination',\n          themeClasses.value,\n        ]}\n        role=\"navigation\"\n        aria-label={ t(props.ariaLabel) }\n        onKeydown={ onKeydown }\n        data-test=\"v-pagination-root\"\n      >\n        <ul class=\"v-pagination__list\">\n          { props.showFirstLastPage && (\n            <li key=\"first\" class=\"v-pagination__first\" data-test=\"v-pagination-first\">\n              { slots.first ? slots.first(controls.value.first) : (\n                <VBtn _as=\"VPaginationBtn\" {...controls.value.first} />\n              ) }\n            </li>\n          ) }\n\n          <li key=\"prev\" class=\"v-pagination__prev\" data-test=\"v-pagination-prev\">\n            { slots.prev ? slots.prev(controls.value.prev) : (\n              <VBtn _as=\"VPaginationBtn\" {...controls.value.prev} />\n            ) }\n          </li>\n\n          { items.value.map((item, index) => (\n            <li\n              key={ item.key }\n              class={[\n                'v-pagination__item',\n                {\n                  'v-pagination__item--is-active': item.isActive,\n                },\n              ]}\n              data-test=\"v-pagination-item\"\n            >\n              { slots.item ? slots.item(item) : (\n                <VBtn _as=\"VPaginationBtn\" {...item.props}>{ item.page }</VBtn>\n              ) }\n            </li>\n          )) }\n\n          <li\n            key=\"next\"\n            class=\"v-pagination__next\"\n            data-test=\"v-pagination-next\"\n          >\n            { slots.next ? slots.next(controls.value.next) : (\n              <VBtn _as=\"VPaginationBtn\" {...controls.value.next} />\n            ) }\n          </li>\n\n          { props.showFirstLastPage && (\n            <li\n              key=\"last\"\n              class=\"v-pagination__last\"\n              data-test=\"v-pagination-last\"\n            >\n              { slots.last ? slots.last(controls.value.last) : (\n                <VBtn _as=\"VPaginationBtn\" {...controls.value.last} />\n              ) }\n            </li>\n          ) }\n        </ul>\n      </props.tag>\n    ))\n\n    return {}\n  },\n})\n\nexport type VPagination = InstanceType<typeof VPagination>\n"],"mappings":"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"}